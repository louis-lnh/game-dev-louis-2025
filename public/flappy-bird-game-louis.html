<!DOCTYPE html>
<html>
<head>
    <title>Flappy Bird</title>
</head>
<body style="background-color: #70c5ce; margin: 0; overflow: hidden; display: flex; justify-content: center; align-items: center; height: 100vh;">
    <canvas id="gameCanvas" width="288" height="512" style="border: 1px solid black; background-image: url('https://raw.githubusercontent.com/An-Kit-2002/Flappy-Bird/main/assets/background.png');"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Game state variables
        let score = 0;
        let bestScore = 0;
        let isGameOver = false;

        // Load images
        const birdImg = new Image();
        birdImg.src = 'https://raw.githubusercontent.com/An-Kit-2002/Flappy-Bird/main/assets/bird.png';

        const pipeTopImg = new Image();
        pipeTopImg.src = 'https://raw.githubusercontent.com/An-Kit-2002/Flappy-Bird/main/assets/pipeNorth.png';

        const pipeBottomImg = new Image();
        pipeBottomImg.src = 'https://raw.githubusercontent.com/An-Kit-2002/Flappy-Bird/main/assets/pipeSouth.png';

        // Bird properties
        const bird = {
            x: 50,
            y: canvas.height / 2,
            width: 38,
            height: 26,
            velocity: 0,
            gravity: 0.2
        };

        // Pipe properties
        const pipes = [];
        const pipeWidth = 52;
        const pipeGap = 100;
        let frameCount = 0;

        // Draw functions
        function drawBird() {
            ctx.drawImage(birdImg, bird.x, bird.y, bird.width, bird.height);
        }

        function drawPipes() {
            for (let i = 0; i < pipes.length; i++) {
                ctx.drawImage(pipeTopImg, pipes[i].x, pipes[i].y, pipeWidth, pipes[i].height);
                ctx.drawImage(pipeBottomImg, pipes[i].x, pipes[i].y + pipes[i].height + pipeGap, pipeWidth, canvas.height - pipes[i].height - pipeGap);
            }
        }

        function drawScore() {
            ctx.fillStyle = "white";
            ctx.font = "24px 'Press Start 2P', cursive";
            ctx.strokeStyle = "black";
            ctx.lineWidth = 2;
            ctx.strokeText("Score: " + score, 10, 30);
            ctx.fillText("Score: " + score, 10, 30);
        }

        function drawGameOver() {
            ctx.fillStyle = "white";
            ctx.font = "40px 'Press Start 2P', cursive";
            ctx.strokeStyle = "black";
            ctx.lineWidth = 4;
            const gameOverText = "Game Over";
            const gameOverTextMetrics = ctx.measureText(gameOverText);
            const gameOverTextX = (canvas.width / 2) - (gameOverTextMetrics.width / 2);
            ctx.strokeText(gameOverText, gameOverTextX, canvas.height / 2 - 20);
            ctx.fillText(gameOverText, gameOverTextX, canvas.height / 2 - 20);

            ctx.font = "24px 'Press Start 2P', cursive";
            const scoreText = "Score: " + score;
            const bestText = "Best: " + bestScore;
            const scoreTextMetrics = ctx.measureText(scoreText);
            const bestTextMetrics = ctx.measureText(bestText);
            const scoreTextX = (canvas.width / 2) - (scoreTextMetrics.width / 2);
            const bestTextX = (canvas.width / 2) - (bestTextMetrics.width / 2);

            ctx.strokeText(scoreText, scoreTextX, canvas.height / 2 + 20);
            ctx.fillText(scoreText, scoreTextX, canvas.height / 2 + 20);
            ctx.strokeText(bestText, bestTextX, canvas.height / 2 + 50);
            ctx.fillText(bestText, bestTextX, canvas.height / 2 + 50);
        }

        // Game logic
        function update() {
            if (isGameOver) {
                return;
            }

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Bird physics
            bird.velocity += bird.gravity;
            bird.y += bird.velocity;

            // Pipe generation
            frameCount++;
            if (frameCount % 120 === 0) {
                const pipeHeight = Math.floor(Math.random() * (canvas.height - 200 - pipeGap)) + 100;
                pipes.push({
                    x: canvas.width,
                    y: pipeHeight - canvas.height,
                    width: pipeWidth,
                    height: canvas.height
                });
            }

            // Pipe movement
            for (let i = 0; i < pipes.length; i++) {
                pipes[i].x -= 2;

                // Check for collision
                if (
                    bird.x < pipes[i].x + pipes[i].width &&
                    bird.x + bird.width > pipes[i].x &&
                    (bird.y < pipes[i].y + pipes[i].height || bird.y + bird.height > pipes[i].y + pipes[i].height + pipeGap)
                ) {
                    isGameOver = true;
                }

                // Check for pipe passing
                if (pipes[i].x + pipes[i].width < bird.x && !pipes[i].passed) {
                    score++;
                    pipes[i].passed = true;
                }
            }

            // Remove off-screen pipes
            pipes.filter(pipe => pipe.x + pipeWidth > 0);

            // Boundary collision
            if (bird.y + bird.height > canvas.height || bird.y < 0) {
                isGameOver = true;
            }

            // Draw everything
            drawPipes();
            drawBird();
            drawScore();

            if (isGameOver) {
                if (score > bestScore) {
                    bestScore = score;
                }
                drawGameOver();
            }
        }

        // Handle user input
        document.onclick = function() {
            if (isGameOver) {
                resetGame();
            } else {
                bird.velocity = -4;
            }
        };

        function resetGame() {
            isGameOver = false;
            score = 0;
            bird.y = canvas.height / 2;
            bird.velocity = 0;
            pipes.length = 0;
            frameCount = 0;
        }

        // Main game loop
        setInterval(update, 1000 / 60); // 60 FPS
    </script>
</body>
</html>
